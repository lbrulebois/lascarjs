!function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var p="function"==typeof require&&require;if(!f&&p)return p(i,!0);if(u)return u(i,!0);throw(p=new Error("Cannot find module '"+i+"'")).code="MODULE_NOT_FOUND",p}p=n[i]={exports:{}},e[i][0].call(p.exports,function(r){return o(e[i][1][r]||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}({1:[function(require,module,exports){!function(global){!function(){"use strict";var _jquery=_interopRequireDefault("undefined"!=typeof window?window.jQuery:void 0!==global?global.jQuery:null),_leaflet=_interopRequireDefault("undefined"!=typeof window?window.L:void 0!==global?global.L:null),utils=_interopRequireWildcard(require("./utils/index")),_map=_interopRequireWildcard(require("./classes/map/index")),control=_interopRequireWildcard(require("./classes/control/index")),Lascar=_interopRequireWildcard(require("./classes/layer/index"));function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var cache=new WeakMap;return _getRequireWildcardCache=function(){return cache},cache}function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;if(null===obj||"object"!=typeof obj&&"function"!=typeof obj)return{"default":obj};var cache=_getRequireWildcardCache();if(cache&&cache.has(obj))return cache.get(obj);var key,desc,newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&((desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null)&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]);return newObj["default"]=obj,cache&&cache.set(obj,newObj),newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}if("undefined"==typeof _jquery["default"])throw new Error("La librairie jQuery requise est absente.");if("undefined"==typeof _leaflet["default"])throw new Error("La librairie Leaflet requise est absente.");Lascar={version:"0.3.0",noConflict:window.Lascar||null,utils:utils,map:_map.map,Map:_map.Map,control:control,layer:Lascar};window.Lascar=Lascar}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./classes/control/index":5,"./classes/layer/index":7,"./classes/map/index":9,"./utils/index":12}],2:[function(require,module,exports){!function(global){!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNotifier=function(options){return new Notifier(options)},exports.Notifier=void 0;var _jquery=_interopRequireDefault("undefined"!=typeof window?window.jQuery:void 0!==global?global.jQuery:null),_leaflet=_interopRequireDefault("undefined"!=typeof window?window.L:void 0!==global?global.L:null);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var baseOptions=_leaflet["default"].Control.prototype.options,Notifier=_leaflet["default"].Control.extend({options:_jquery["default"].extend(baseOptions,{position:"topleft",maxMessages:5,defaultMsg:{message:"Un événement est survenu ...",showIcon:!0,icon:(0,_jquery["default"])("<span>",{"class":"alert",html:" ! ",css:{color:"red","font-weight":"bold"}})[0]}}),onAdd:function($container){if($container.notifierControl instanceof Notifier)return $container.notifierControl.hide(),$container.notifierControl;var _this=this,$container=(0,_jquery["default"])("<div>",{"class":"leaflet-control lascar-notifier"});return(0,_jquery["default"])("<a>",{href:"#",html:"&times;","class":"lascar-notifier-close",title:"Fermer"}).click(function(event){_this.hide(),event.preventDefault()}).appendTo($container),$container.hide(),this._container=$container[0]},show:function(data){function integrateMessage(message){var $container=(0,_jquery["default"])(this._container);if($container.parent().addClass("lascar-notifier-container"),$container.find(".message").length>=this.options.maxMessages)for(;$container.find(".message").length>=this.options.maxMessages;)$container.find(".message").first().remove();$container.find(".message .notifier-icon").children().addClass("no-anim");var $ctMessage=$("<div>",{"class":"message"});(0,_jquery["default"])("<span>",{"class":"notifier-icon",html:(0,_jquery["default"])(message.icon).clone()}).appendTo($ctMessage),(0,_jquery["default"])("<span>",{"class":"notifier-msg",html:message.message}).appendTo($ctMessage),$ctMessage.appendTo($container)}return"string"==typeof data?integrateMessage.call(this,_jquery["default"].extend({},this.options.defaultMsg,{message:data})):"object"==typeof data&&null!=data&&"string"==typeof data.message?integrateMessage.call(this,_jquery["default"].extend({},this.options.defaultMsg,data)):integrateMessage.call(this,this.options.defaultMsg),(0,_jquery["default"])(this._container).show(),this},hide:function(){var $container=(0,_jquery["default"])(this._container);return $container.parent().removeClass("lascar-notifier-container"),$container.children(".message").remove(),$container.hide(),this}});exports.Notifier=Notifier}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(require,module,exports){!function(global){!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createRequest=function(options){return new Request(options)},exports.Request=void 0;var _jquery=_interopRequireDefault("undefined"!=typeof window?window.jQuery:void 0!==global?global.jQuery:null);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var Request=_interopRequireDefault("undefined"!=typeof window?window.L:void 0!==global?global.L:null)["default"].Evented.extend({options:{async:!0,cache:!1,crossDomain:!1,contentType:"application/json",dataType:"json",headers:{}},initialize:function(options){this.options=_jquery["default"].extend(this.options,options)},send:function(options){var opts=this.options;if("string"!=typeof(opts="object"==typeof options&&null!=options?_jquery["default"].extend({},this.options,options):opts).url||"string"!=typeof opts.type)throw new Exception("La configuration ne permet pas d'envoyer la requête.");"object"==typeof opts.headers&&null!=opts.headers&&(opts.beforeSend=function(xhr){_jquery["default"].map(opts.headers,function(value,key){xhr.setRequestHeader(key,value)})}),this.fire("sending");var _this=this,result=null;if(_jquery["default"].ajax(opts).done(function(data,status,jqXHR){_this.fire("success",result={data:data,status:status,jqXHR:jqXHR})}).fail(function(jqXHR,status,error){_this.fire("fail",result={error:error,status:status,jqXHR:jqXHR})}),"boolean"==typeof opts.async&&!opts.async)return result}});exports.Request=Request}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(require,module,exports){!function(global){!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createUrlHash=function(){return new UrlHash},exports.UrlHash=void 0;var _String=require("../../utils/String"),_jquery=_interopRequireDefault("undefined"!=typeof window?window.jQuery:void 0!==global?global.jQuery:null);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var UrlHash=_interopRequireDefault("undefined"!=typeof window?window.L:void 0!==global?global.L:null)["default"].Class.extend({options:{onhashchange:Array(),maps:Array()},initialize:function(){var _this=this;window.onhashchange=function(event){var data=_this.unserialize();_jquery["default"].each(_this.options.onhashchange,function(i,func){func.call(_this,{oldUrl:event.oldURL,newUrl:event.newURL,data:data})})}},serialize:function(){var hashData=[];_jquery["default"].each(this.options.maps,function(i,map){hashData.push("{0}={1}/{2}/{3},layer={4}".format(map.options.id,map.getZoom(),map.getCenter().lat,map.getCenter().lng,_jquery["default"].map(map._layers,function(l,i){if("base_layer"==l.options._type)return l})[0].options.id))}),window.location.hash=hashData.join("&")},unserialize:function(){var str=window.location.hash.substr(1);if((0,_String.strIsNullOrEmpty)(str))return{};var data={};return _jquery["default"].each(str.split("&"),function(i,d){var dataKey,dataValue,dataValueMap;d.match(/([a-zA-Z0-9_-]+)=(.*)/)?(dataValueMap=d.indexOf("="),dataKey=d.substr(0,dataValueMap),dataValue=d.substr(++dataValueMap),dataValueMap=undefined,(dataValueMap=dataValue.match(/(-?[0-9]*\.?[0-9]*)\/(-?[0-9]*\.?[0-9]*)\/(-?[0-9]*\.?[0-9]*),layer=(.+)/))&&(data[dataKey]={zoom:parseInt(dataValueMap[1]),lng:parseFloat(dataValueMap[3]),lat:parseFloat(dataValueMap[2]),layer:dataValueMap[4]})):data[d]=null}),data},addTo:function(map){if(map.urlControl instanceof UrlHash)return map.urlControl;this.options.maps.push(map),this.options.onhashchange.push(map._onhashchange=function(args){"undefined"!=typeof args.data[map.options.id]&&map.apply(args.data[map.options.id])}),map.on("moveend baselayerchange",function(event){this.serialize()},this)}});exports.UrlHash=UrlHash}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/String":10}],5:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Notifier",{enumerable:!0,get:function(){return _Notifier.Notifier}}),Object.defineProperty(exports,"notifier",{enumerable:!0,get:function(){return _Notifier.createNotifier}}),Object.defineProperty(exports,"UrlHash",{enumerable:!0,get:function(){return _UrlHash.UrlHash}}),Object.defineProperty(exports,"urlHash",{enumerable:!0,get:function(){return _UrlHash.createUrlHash}}),Object.defineProperty(exports,"Request",{enumerable:!0,get:function(){return _Request.Request}}),Object.defineProperty(exports,"request",{enumerable:!0,get:function(){return _Request.createRequest}});var _Notifier=require("./Notifier"),_UrlHash=require("./UrlHash"),_Request=require("./Request")},{"./Notifier":2,"./Request":3,"./UrlHash":4}],6:[function(require,module,exports){!function(global){!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createGeojson=function(options){return new Geojson(options)},exports.Geojson=void 0;var _Request=require("../control/Request"),_jquery=_interopRequireDefault("undefined"!=typeof window?window.jQuery:void 0!==global?global.jQuery:null);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var Geojson=_interopRequireDefault("undefined"!=typeof window?window.L:void 0!==global?global.L:null)["default"].GeoJSON.extend({_request:new _Request.Request,initialize:function(options){this.options=_jquery["default"].extend(this.options,{funcs:{success:function(event){this.addData(event.data)},fail:function(event){"function"==typeof opts.fail?opts.fail(event):"object"==typeof console&&null!=console&&console.log("[ERR] La requête n'a pas abouti.")}}},options),this._layers={}},build:function(pos){var opts=this.options;if("string"!=typeof(opts="object"==typeof pos&&null!=pos?_jquery["default"].extend({},this.options,pos):opts).url)throw new Exception("La configuration ne permet pas de générer le layer.");pos=-1;return this._request._events&&"sending"in this._request._events&&-1!=(pos=_jquery["default"].inArray(this.options.funcs.sending,this._request._events.sending))&&this._request._events.sending.splice(pos,1),this._request._events&&"fail"in this._request._events&&-1!=(pos=_jquery["default"].inArray(this.options.funcs.fail,this._request._events.fail))&&this._request._events.fail.splice(pos,1),this._request._events&&"success"in this._request._events&&-1!=(pos=_jquery["default"].inArray(this.options.funcs.success,this._request._events.success))&&this._request._events.success.splice(pos,1),this._request.on("success",this.options.funcs.success,this),this._request.on("fail",this.options.funcs.fail,this),this._request.send(opts),this}});exports.Geojson=Geojson}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../control/Request":3}],7:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Geojson",{enumerable:!0,get:function(){return _Geojson.Geojson}}),Object.defineProperty(exports,"geojson",{enumerable:!0,get:function(){return _Geojson.createGeojson}});var _Geojson=require("./Geojson")},{"./Geojson":6}],8:[function(require,module,exports){!function(global){!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createMap=function(){return 1==arguments.length?new Map(arguments[0]):2==arguments.length?new Map(arguments[0],arguments[1]):new Map},exports.Map=void 0;var _fonctions=require("../../utils/fonctions"),_String=require("../../utils/String"),_jquery=_interopRequireDefault("undefined"!=typeof window?window.jQuery:void 0!==global?global.jQuery:null),_leaflet=_interopRequireDefault("undefined"!=typeof window?window.L:void 0!==global?global.L:null);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var baseOptions=_leaflet["default"].Map.prototype.options,Map=_leaflet["default"].Map.extend({options:_jquery["default"].extend(baseOptions,{lascar:{id:"lmap",options:{attributionControl:!1,_attribution:{prefix:'🗻 <a href="http://lascar.brulebois.fr">lascarjs</a> basée sur 🍃 <a href="https://leafletjs.com">Leaflet</a>'},zoom:6,zoomControl:!1,_zoom:{position:"topright",zoomInTitle:"Zoomer",zoomOutTitle:"Dézoomer"},_scale:{position:"bottomright"},style:{width:"100%",height:"100%",position:"absolute",top:"0",left:"0"},center:new _leaflet["default"].LatLng(46.53972,2.43028),_dataLayers:[{id:"osm",title:"OpenStreetMap",url:"http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'Fond fourni par <a href="http://openstreetmap.org/">OpenStreetMap</a>',maxZoom:19,minZoom:0},{id:"osm_fr",title:"OpenStreetMap (France)",url:"http://{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png",attribution:'Fond fourni par <a href="http://tile.openstreetmap.fr/">OpenStreetMap France</a>',maxZoom:18,minZoom:0}]}}}),initialize:function(){var layers,_this,id=this.options.lascar.id,lascarOpts=this.options.lascar.options;1==arguments.length?"string"==typeof arguments[0]?((0,_fonctions.checkId)("#{0}".format(arguments[0])),id=arguments[0]):"object"==typeof arguments[0]&&null!=arguments[0]&&(lascarOpts=_jquery["default"].extend(lascarOpts,arguments[0])):2==arguments.length&&((0,_fonctions.checkId)("#{0}".format(arguments[0])),id=arguments[0],lascarOpts=_jquery["default"].extend(lascarOpts,arguments[1])),this.options.id=id,_leaflet["default"].Map.prototype.initialize.call(this,id,_jquery["default"].extend(this.options,lascarOpts)),"object"==typeof lascarOpts.style&&null!=lascarOpts.style&&(0,_jquery["default"])("#{0}".format(id)).css(lascarOpts.style),"object"==typeof lascarOpts._dataLayers&&lascarOpts._dataLayers instanceof Array&&(layers={},(_this=this).options._layers=[],_jquery["default"].each(lascarOpts._dataLayers,function(i,dataLayer){var layer=null;_this.options._layers.push(layer=_leaflet["default"].tileLayer(dataLayer.url,dataLayer)),layer.options._type="base_layer",layers[dataLayer.title]=layer}),(this.layersControl=_leaflet["default"].control.layers(layers)).addTo(this),this.addLayer(layers[lascarOpts._dataLayers[0].title])),"object"==typeof lascarOpts._attribution&&null!=lascarOpts._attribution&&_leaflet["default"].control.attribution(lascarOpts._attribution).addTo(this),"object"==typeof lascarOpts._zoom&&null!=lascarOpts._zoom&&_leaflet["default"].control.zoom(lascarOpts._zoom).addTo(this),"object"==typeof lascarOpts._scale&&null!=lascarOpts._scale&&_leaflet["default"].control.scale(lascarOpts._scale).addTo(this),this.invalidateSize()},apply:function(data){function changeLayer(layer){if("object"!=typeof layer&&!(layer instanceof _leaflet["default"].Layer))return!1;_jquery["default"].each(this._layers,function(id,layer){"base_layer"==layer.options._type&&_this.removeLayer(layer)}),this.addLayer(layer)}var _this=this;void 0===data||null==data||"number"!=typeof data.zoom&&"string"!=typeof data.layer&&"number"!=typeof data.lat&&"number"!=typeof data.lng?(this.setView(this.options.center,this.options.zoom),changeLayer.call(this,this.options._layers[0])):("number"==typeof data.zoom&&data.zoom!=this.getZoom()&&this.setZoom(data.zoom),"number"==typeof data.lat&&"number"==typeof data.lng&&this.setView(new _leaflet["default"].LatLng(data.lat,data.lng)),"string"==typeof data.layer&&(0,_String.strIsNullOrEmpty)(data.layer),changeLayer.call(this,_jquery["default"].grep(this.options._layers,function(l){return l.options.id==data.layer})[0]))}});exports.Map=Map}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/String":10,"../../utils/fonctions":11}],9:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Map",{enumerable:!0,get:function(){return _Map.Map}}),Object.defineProperty(exports,"map",{enumerable:!0,get:function(){return _Map.createMap}});var _Map=require("./Map")},{"./Map":8}],10:[function(require,module,exports){!function(global){!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.strIsNullOrEmpty=exports.strFormat=void 0;var obj,_jquery=(obj="undefined"!=typeof window?window.jQuery:void 0!==global?global.jQuery:null)&&obj.__esModule?obj:{"default":obj};var strFormat=function(str){if("string"!=typeof str||null==str)throw new Error("Aucune chaîne valide n'a été identifiée.");var args=function(args){var _args=new Array;return _jquery["default"].each(args,function(i,arg){0<i&&_args.push(arg)}),_args}(arguments);return str.replace(/{(\d+)}/g,function(match,value){if(value>=args.length)throw new Error("Aucune valeur n'existe pour l'indice n°".concat(value).concat("."));return args[value]})};exports.strFormat=strFormat,String.prototype.format=function(){return strFormat.apply(this,(src=this,args=arguments,(_args=new Array).push(src),_jquery["default"].each(args,function(i,arg){_args.push(arg)}),_args));var src,args,_args};var strIsNullOrEmpty=function(str){return"string"!=typeof str||(null==str||""==$.trim(str))};exports.strIsNullOrEmpty=strIsNullOrEmpty,String.isNullOrEmpty=strIsNullOrEmpty}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],11:[function(require,module,exports){!function(global){!function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.checkId=function(id){if((0,_String.strIsNullOrEmpty)(id))throw new Error("La chaîne n'est pas un identifiant valide.");if(1!=(0,_jquery["default"])(id).length)throw new Error("L'identifiant n'existe pas dans le DOM.")};var obj,_jquery=(obj="undefined"!=typeof window?window.jQuery:void 0!==global?global.jQuery:null)&&obj.__esModule?obj:{"default":obj},_String=require("./String")}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./String":10}],12:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _String=require("./String");Object.keys(_String).forEach(function(key){"default"!==key&&"__esModule"!==key&&(key in exports&&exports[key]===_String[key]||Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _String[key]}}))});var _fonctions=require("./fonctions");Object.keys(_fonctions).forEach(function(key){"default"!==key&&"__esModule"!==key&&(key in exports&&exports[key]===_fonctions[key]||Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _fonctions[key]}}))})},{"./String":10,"./fonctions":11}]},{},[1]);